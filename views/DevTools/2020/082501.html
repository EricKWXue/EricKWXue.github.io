<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>sonarQube 使用手册 | Eric Blog</title>
    <meta name="description" content="You&#39;re never wrong to do the right things. ——《The Intern》">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.807e3e1f.css" as="style"><link rel="preload" href="/assets/js/app.cda6d5d2.js" as="script"><link rel="preload" href="/assets/js/3.e2fc40bf.js" as="script"><link rel="preload" href="/assets/js/1.e1e77f42.js" as="script"><link rel="preload" href="/assets/js/27.382e4b56.js" as="script"><link rel="prefetch" href="/assets/js/10.161432e6.js"><link rel="prefetch" href="/assets/js/11.0f152647.js"><link rel="prefetch" href="/assets/js/12.0cbc75b1.js"><link rel="prefetch" href="/assets/js/13.49b737ac.js"><link rel="prefetch" href="/assets/js/14.93babe0f.js"><link rel="prefetch" href="/assets/js/15.a856a167.js"><link rel="prefetch" href="/assets/js/16.00d4fbeb.js"><link rel="prefetch" href="/assets/js/17.a1a7323d.js"><link rel="prefetch" href="/assets/js/18.71d71e1b.js"><link rel="prefetch" href="/assets/js/19.565c3806.js"><link rel="prefetch" href="/assets/js/20.895762e9.js"><link rel="prefetch" href="/assets/js/21.c20cfd40.js"><link rel="prefetch" href="/assets/js/22.b1eaa114.js"><link rel="prefetch" href="/assets/js/23.4e5233b7.js"><link rel="prefetch" href="/assets/js/24.6bb42f53.js"><link rel="prefetch" href="/assets/js/25.6b82d8dd.js"><link rel="prefetch" href="/assets/js/26.90155bed.js"><link rel="prefetch" href="/assets/js/28.b26fcf12.js"><link rel="prefetch" href="/assets/js/29.f28d7f45.js"><link rel="prefetch" href="/assets/js/30.7818df1e.js"><link rel="prefetch" href="/assets/js/31.754ab537.js"><link rel="prefetch" href="/assets/js/32.627e756e.js"><link rel="prefetch" href="/assets/js/33.120c9056.js"><link rel="prefetch" href="/assets/js/34.743f6db0.js"><link rel="prefetch" href="/assets/js/35.c5bcd4c1.js"><link rel="prefetch" href="/assets/js/36.2a128729.js"><link rel="prefetch" href="/assets/js/37.5fd65a10.js"><link rel="prefetch" href="/assets/js/38.1d3eb47b.js"><link rel="prefetch" href="/assets/js/39.8b02eab2.js"><link rel="prefetch" href="/assets/js/4.25ce20ae.js"><link rel="prefetch" href="/assets/js/40.6c4929b3.js"><link rel="prefetch" href="/assets/js/41.43bf4db3.js"><link rel="prefetch" href="/assets/js/42.af096912.js"><link rel="prefetch" href="/assets/js/43.8e64077f.js"><link rel="prefetch" href="/assets/js/44.c60cf0ba.js"><link rel="prefetch" href="/assets/js/45.27eac2a1.js"><link rel="prefetch" href="/assets/js/46.0fb3f8f8.js"><link rel="prefetch" href="/assets/js/47.528cbe93.js"><link rel="prefetch" href="/assets/js/48.0661e440.js"><link rel="prefetch" href="/assets/js/49.d634393b.js"><link rel="prefetch" href="/assets/js/5.3ace0281.js"><link rel="prefetch" href="/assets/js/6.6ccd4b8c.js"><link rel="prefetch" href="/assets/js/7.6dc42888.js"><link rel="prefetch" href="/assets/js/8.397f7c51.js"><link rel="prefetch" href="/assets/js/9.0a376aa1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.807e3e1f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-4698c43e><div data-v-4698c43e><div id="loader-wrapper" class="loading-wrapper" data-v-4b73742e data-v-4698c43e data-v-4698c43e><div class="loader-main" data-v-4b73742e><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-6cbeab0a data-v-4698c43e data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>Eric Blog</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>Eric Xue</span>
            
          <span data-v-6cbeab0a>2020 - </span>
          2025
        </a></span></div></div> <div class="hide" data-v-4698c43e><header class="navbar" data-v-4698c43e><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.png" alt="Eric Blog" class="logo"> <span class="site-name">Eric Blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/CSS/" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/categories/DevTools/" class="nav-link"><i class="iconfont undefined"></i>
  DevTools
</a></li><li class="dropdown-item"><!----> <a href="/categories/Database/" class="nav-link"><i class="iconfont undefined"></i>
  Database
</a></li><li class="dropdown-item"><!----> <a href="/categories/GameRules/" class="nav-link"><i class="iconfont undefined"></i>
  GameRules
</a></li><li class="dropdown-item"><!----> <a href="/categories/JS/" class="nav-link"><i class="iconfont undefined"></i>
  JS
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="iconfont undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/Threads/" class="nav-link"><i class="iconfont undefined"></i>
  Threads
</a></li><li class="dropdown-item"><!----> <a href="/categories/WorkFlow/" class="nav-link"><i class="iconfont undefined"></i>
  WorkFlow
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricKWXue" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/e_eric12138" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-4698c43e></div> <aside class="sidebar" data-v-4698c43e><div class="personal-info-wrapper" data-v-6c8ffc9c><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-6c8ffc9c> <h3 class="name" data-v-6c8ffc9c>
    Eric Xue
  </h3> <div class="num" data-v-6c8ffc9c><div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>38</h3> <h6 data-v-6c8ffc9c>文章</h6></div> <div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>22</h3> <h6 data-v-6c8ffc9c>标签</h6></div></div> <hr data-v-6c8ffc9c></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/CSS/" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/categories/DevTools/" class="nav-link"><i class="iconfont undefined"></i>
  DevTools
</a></li><li class="dropdown-item"><!----> <a href="/categories/Database/" class="nav-link"><i class="iconfont undefined"></i>
  Database
</a></li><li class="dropdown-item"><!----> <a href="/categories/GameRules/" class="nav-link"><i class="iconfont undefined"></i>
  GameRules
</a></li><li class="dropdown-item"><!----> <a href="/categories/JS/" class="nav-link"><i class="iconfont undefined"></i>
  JS
</a></li><li class="dropdown-item"><!----> <a href="/categories/Spring/" class="nav-link"><i class="iconfont undefined"></i>
  Spring
</a></li><li class="dropdown-item"><!----> <a href="/categories/Threads/" class="nav-link"><i class="iconfont undefined"></i>
  Threads
</a></li><li class="dropdown-item"><!----> <a href="/categories/WorkFlow/" class="nav-link"><i class="iconfont undefined"></i>
  WorkFlow
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/EricKWXue" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://blog.csdn.net/e_eric12138" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>sonarQube 使用手册</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/DevTools/2020/082501.html#_1-前言" class="sidebar-link">1. 前言</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_1-1-持续集成工具" class="sidebar-link">1.1 持续集成工具</a></li></ul></li><li><a href="/views/DevTools/2020/082501.html#_2-sonarqube之简介" class="sidebar-link">2. sonarQube之简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_2-1-核心价值" class="sidebar-link">2.1 核心价值</a></li><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_2-2-组成" class="sidebar-link">2.2 组成</a></li><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_2-3-工作流程" class="sidebar-link">2.3 工作流程</a></li></ul></li><li><a href="/views/DevTools/2020/082501.html#_3-sonarqube之操作手册" class="sidebar-link">3. sonarQube之操作手册</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_3-1-创建sonar工程" class="sidebar-link">3.1 创建sonar工程</a></li><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_3-2-代码扫描" class="sidebar-link">3.2 代码扫描</a></li><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_3-3-质量配置" class="sidebar-link">3.3 质量配置</a></li><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_3-4-质量阀" class="sidebar-link">3.4 质量阀</a></li><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_3-5-项目权限" class="sidebar-link">3.5 项目权限</a></li></ul></li><li><a href="/views/DevTools/2020/082501.html#_4-sonarqube之其他零碎介绍" class="sidebar-link">4. sonarQube之其他零碎介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_4-1-项目-projects" class="sidebar-link">4.1 项目(Projects)</a></li><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_4-2-问题-issues" class="sidebar-link">4.2 问题(Issues)</a></li><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_4-3-代码规则-rules" class="sidebar-link">4.3 代码规则(Rules)</a></li><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_4-4-质量配置-quality-profiles" class="sidebar-link">4.4 质量配置(Quality Profiles)</a></li><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_4-5-质量阀-quality-gates" class="sidebar-link">4.5 质量阀(Quality Gates)</a></li><li class="sidebar-sub-header"><a href="/views/DevTools/2020/082501.html#_4-6-配置-administration" class="sidebar-link">4.6 配置(Administration)</a></li></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-6cbeab0a data-v-4698c43e><h3 class="title" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a>sonarQube 使用手册</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><input type="password" value="" data-v-6cbeab0a> <span data-v-6cbeab0a>Konck! Knock!</span> <button data-v-6cbeab0a>OK</button></label> <div class="footer" style="display:none;" data-v-6cbeab0a data-v-6cbeab0a><span data-v-6cbeab0a><i class="iconfont reco-theme" data-v-6cbeab0a></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6cbeab0a>vuePress-theme-reco</a></span> <span data-v-6cbeab0a><i class="iconfont reco-copyright" data-v-6cbeab0a></i> <a data-v-6cbeab0a><span data-v-6cbeab0a>Eric Xue</span>
            
          <span data-v-6cbeab0a>2020 - </span>
          2025
        </a></span></div></div> <div data-v-4698c43e><main class="page"><!----> <div class="page-title" style="display:none;"><h1>sonarQube 使用手册</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>Eric Xue</span></i> <i class="iconfont reco-date" data-v-484a899e><span data-v-484a899e>2019-08-25</span></i> <!----> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      sonar
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="sonarqube-使用手册"><a href="#sonarqube-使用手册" class="header-anchor">#</a> sonarQube 使用手册</h1> <h2 id="_1-前言"><a href="#_1-前言" class="header-anchor">#</a> 1. 前言</h2> <p>一个项目从开发到发布，中间要经过很多测试，总结一下通常是开发者的自测（单元测试）、测试团队测试（黑盒测试、白盒测试、集成测试、系统测试、性能测试等等），以及面向用户测试（UAT）。</p> <p>那现如今大家逐渐认识到测试前移的重要性，即在开发阶段就保证代码的质量。如果一开始就写出优质的、经过测试的代码，那么后面的测试阶段将会减少很多不必要的时间，同时也能降低上线后产生bug的风险。所以为了让测试这个过程尽早地参与到开发阶段中来，就有个单元测试、团队内部交叉测试、代码评审这些流程。</p> <p>效果是显著的，毕竟人多力量大。但是更多情况就是团队成员每个人其实都很忙，没有太多精力去测试、评审考量其他人的代码，尤其是遇到那些逻辑混乱、复杂度高、易读性差、缺乏必要注释的“烂代码”，说多了也会心累的。所以在单元自测的时候，我们开发者需要借助一些代码扫描工具，把显而易见的&quot;烂代码&quot;问题先解了，把可能隐藏很深、真正不易被发现的业务问题留给团队去发现。</p> <h3 id="_1-1-持续集成工具"><a href="#_1-1-持续集成工具" class="header-anchor">#</a> 1.1 持续集成工具</h3> <p>目前比较成熟的团队工作模式，采用的持续集成工具jenkins+sonar+gitlab，如下图所示</p> <p><img src="/views-img/2020082501/%E5%9B%A2%E9%98%9F%E6%93%8D%E4%BD%9C.png" alt=""></p> <ol><li>开发团队提交代码到代码仓库gitlab</li> <li>jenkins触发代码扫描检测机制</li> <li>jenkins触发自动编译&amp;打包&amp;部署机制</li> <li>jenkins触发自动化接口&amp;性能测试机制</li> <li>jenkins返回测试&amp;部署结果给开发团队</li></ol> <p>可以才看出jenkins能做很多事情，是持续集成的核心。但是我们下面就详细介绍下其中的代码质量扫描工具Sonar。</p> <h2 id="_2-sonarqube之简介"><a href="#_2-sonarqube之简介" class="header-anchor">#</a> 2. sonarQube之简介</h2> <h3 id="_2-1-核心价值"><a href="#_2-1-核心价值" class="header-anchor">#</a> 2.1 核心价值</h3> <ul><li>检查代码是否遵循编程标准：如命名规范，编写的规范等。</li> <li>检查设计存在的潜在缺陷：sonarQube通过插件Findbugs、Checkstyle等工具检测代码存在的缺陷。</li> <li>检测代码的重复代码量：sonarQube可以展示项目中存在大量复制粘贴的代码。</li> <li>检测代码中注释的程度：源码注释过多或者太少都不好，影响程序的可读可理解性。</li> <li>检测代码中包、类之间的关系：分析类之间的关系是否合理，复杂度情况。</li></ul> <h3 id="_2-2-组成"><a href="#_2-2-组成" class="header-anchor">#</a> 2.2 组成</h3> <p><img src="/views-img/2020082501/sonar%E7%BB%84%E6%88%90.png" alt=""></p> <ul><li><strong>sonarQube服务器</strong>，包含三个子进程：web服务（界面管理）、搜索服务、计算引擎服务（写入数据库）</li> <li><strong>sonarQube数据库</strong>，存储sonar相关的配置信息、项目分析结果等</li> <li><strong>sonarQube插件</strong>，位于解压目录extensions\plugins目录，可按需安装多个插件</li> <li><strong>sonarQube Scanners</strong>，扫描器</li></ul> <h3 id="_2-3-工作流程"><a href="#_2-3-工作流程" class="header-anchor">#</a> 2.3 工作流程</h3> <p><img src="/views-img/2020082501/sonar%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B.png" alt=""></p> <ol><li>开发人员提交代码到代码仓库gitlab</li> <li>jenkins自动拉取代码到到编译服务器</li> <li>Sonar Scanners扫描该代码检查质量，将分析结果推送到sonarQube平台，进而持久化数据库存储</li> <li>开发&amp;测试人员可以使用IDE插件来同步sonarQube结果（java和js版本等），并可以实时在线分析分析</li> <li>其他用户可以通过Web访问sonarQube质量平台，项目代码质量趋势一目了然</li></ol> <h2 id="_3-sonarqube之操作手册"><a href="#_3-sonarqube之操作手册" class="header-anchor">#</a> 3. sonarQube之操作手册</h2> <ul><li>访问路径：http://ip:port/projects?sort=name，账密：<code>name/password</code></li> <li>所在服务器：ip，账密：<code>name/password</code></li> <li>存储：mysql，账密：<code>name/password</code></li></ul> <h3 id="_3-1-创建sonar工程"><a href="#_3-1-创建sonar工程" class="header-anchor">#</a> 3.1 创建sonar工程</h3> <ol><li>Administration --&gt; Projects --&gt; Management，创建新工程</li></ol> <p><img src="/views-img/2020082501/sonar%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B.png" alt="sonar创建工程"></p> <ol start="2"><li>填写表单，记录下新建工程的<code>Name</code>和<code>Key</code>（配置扫描器的分析参数时，需要用到），Create创建工程</li></ol> <p><img src="/views-img/2020082501/sonar%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B2.png" alt="sonar创建工程"></p> <ol start="3"><li>至此，一个空的工程就创建好了</li></ol> <h3 id="_3-2-代码扫描"><a href="#_3-2-代码扫描" class="header-anchor">#</a> 3.2 代码扫描</h3> <p>选择合适的扫描器，扫描需要检测的Java工程（或者其他工程），分析结果发布到上一步骤创建sonar工程</p> <h4 id="_3-2-1-扫描器选择"><a href="#_3-2-1-扫描器选择" class="header-anchor">#</a> 3.2.1 扫描器选择</h4> <ul><li><p><strong>SonarQube Scanner</strong>: Launch analysis of any language from the command line(通过命令行分析)</p></li> <li><p><strong>SonarQube Scanner for MSBuild</strong>: Launch analysis of .Net projects(使用MSBuild分析)</p></li> <li><p><strong>SonarQube Scanner for Ant</strong>: Launch analysis from Ant(通过Apache Ant编译工具分析)</p></li> <li><p><strong>SonarQube Scanner for Maven</strong>: Launch analysis from Maven with minimal configuration(通过Maven插件集成分析)</p></li> <li><p><strong>SonarQube Scanner for Gradle</strong>: Launch Gradle analysis(通过Gradle工具集成分析)</p></li> <li><p><strong>SonarQube Scanner For Jenkins</strong>: Launch analysis from Jenkins(通过持续集成软件工具jenkins分析)</p></li></ul> <h4 id="_3-2-2-通过jenkins扫描"><a href="#_3-2-2-通过jenkins扫描" class="header-anchor">#</a> 3.2.2 通过Jenkins扫描</h4> <ol><li>Jenkins安装<code>SonarQube Scanner For Jenkins</code>插件（已安装）</li> <li>Jenkins全局配置（系统管理-&gt;系统配置）中配置SonarQube服务器连接详细信息（已配置）</li> <li>在Jenkins某个具体工程中加入sonarQube扫描分析的构建步骤
<ul><li>方案一：构建项目前进行sonarQube扫描</li> <li>方案二：构建项目后进行sonarQube扫描</li> <li>方案三：单独创建一个工程只用于sonarQube扫描（可参考Jenkins工程：<code>sonarqube-lean-dev</code>、<code>sonarqube-lean-master</code>）</li></ul></li> <li>触发jenkins工程，sonar执行代码扫描，完成代码分析报告</li></ol> <p><strong>以方案三构建sonar扫描举例</strong></p> <p>Jenkins工程的配置参考如下，详细可参考Jenkins工程：<code>sonarqube-lean-dev</code>、<code>sonarqube-lean-master</code></p> <ul><li>源码管理，选择Git，配置好仓库与分支</li></ul> <p><img src="/views-img/2020082501/%E6%BA%90%E7%A0%81%E7%AE%A1%E7%90%86.png" alt=""></p> <ul><li>构建触发器，选择Gerrit event，并配置好Gerrit Trigger的触发机制</li></ul> <p><img src="/views-img/2020082501/%E8%A7%A6%E5%8F%91%E5%99%A8.png" alt=""></p> <ul><li>构建，配置分析参数，主要配置两项：<code>以哪种规则扫描分析这个项目</code>、<code>分析结果发布到sonar的哪个工程</code></li></ul> <p><img src="/views-img/2020082501/%E6%9E%84%E5%BB%BA.png" alt=""></p> <h3 id="_3-3-质量配置"><a href="#_3-3-质量配置" class="header-anchor">#</a> 3.3 质量配置</h3> <p>扫描分析时需要匹配代码规则，指定不同的代码规则，扫描分析结果肯定也不一样</p> <h4 id="_3-3-1-创建质量配置"><a href="#_3-3-1-创建质量配置" class="header-anchor">#</a> 3.3.1 创建质量配置</h4> <ol><li>Quality Profiles，创建新质量配置</li></ol> <p><img src="/views-img/2020082501/%E5%88%9B%E5%BB%BA%E8%B4%A8%E9%87%8F%E9%85%8D%E7%BD%AE.png" alt=""></p> <ol start="2"><li>填写表单，输入<code>Name</code>，选择适用的<code>Language</code>，Create创建</li></ol> <p><img src="/views-img/2020082501/%E5%88%9B%E5%BB%BA%E8%B4%A8%E9%87%8F%E9%85%8D%E7%BD%AE2.png" alt=""></p> <ol start="3"><li>至此，一个新的质量配置就生成了。但是这个新生成的配置有两个问题：
<ul><li>新配置中的代码规则是空的，即：已生效规则是0，当前所有存在的规则都是未生效的</li> <li>新配置没有作用到任何一个Java工程的扫描中</li></ul></li></ol> <p><img src="/views-img/2020082501/%E5%88%9B%E5%BB%BA%E8%B4%A8%E9%87%8F%E9%85%8D%E7%BD%AE3.png" alt=""></p> <h4 id="_3-3-2-编辑质量配置"><a href="#_3-3-2-编辑质量配置" class="header-anchor">#</a> 3.3.2 编辑质量配置</h4> <ul><li>向配置中添加/删除代码规则</li></ul> <ol><li>Rules，选择语言是Java，质量配置是上一步骤新创建的Test Rule</li> <li>选择inactive，页面右侧显示所有未生效的规则，需要哪条规则生效，就将其设置成Activate</li> <li>选择active，页面右侧显示所有已生效的规则，想要废弃哪条规则，就将其设置成Inactivate</li></ol> <p><img src="/views-img/2020082501/%E6%B7%BB%E5%8A%A0%E8%A7%84%E5%88%99.png" alt=""></p> <ul><li>向配置中添加/删除适用的工程</li></ul> <ol><li>Quality Profiles，选择质量配置Test Rule，修改适用的工程</li></ol> <p><img src="/views-img/2020082501/%E6%B7%BB%E5%8A%A0%E5%B7%A5%E7%A8%8B.png" alt=""></p> <ol start="2"><li>搜索工程（模糊匹配），勾选，即添加成功；去掉勾选，即删除成功</li></ol> <p><img src="/views-img/2020082501/%E6%B7%BB%E5%8A%A0%E5%B7%A5%E7%A8%8B2.png" alt=""></p> <h3 id="_3-4-质量阀"><a href="#_3-4-质量阀" class="header-anchor">#</a> 3.4 质量阀</h3> <p>它是一系列对项目指标进行度量的条件，扫描分析的项目结果必须达到所有条件才能算整体上通过了质量阈，其结果就显示为Pass，否则为Fail</p> <h4 id="_3-4-1-创建质量阀"><a href="#_3-4-1-创建质量阀" class="header-anchor">#</a> 3.4.1 创建质量阀</h4> <ul><li>Quality Gates，创建一个空的质量阀</li></ul> <p><img src="/views-img/2020082501/%E5%88%9B%E5%BB%BA%E8%B4%A8%E9%87%8F%E9%98%80.png" alt=""></p> <h4 id="_3-4-2-编辑质量阀"><a href="#_3-4-2-编辑质量阀" class="header-anchor">#</a> 3.4.2 编辑质量阀</h4> <ol><li>Quality Gates，选择上一步骤创建的质量阀</li> <li>编辑Conditions，即对项目的度量指标，可添加多个</li> <li>编辑Project，添加/删除适用的工程</li></ol> <p><img src="/views-img/2020082501/%E7%BC%96%E8%BE%91%E8%B4%A8%E9%87%8F%E9%98%80.png" alt=""></p> <h3 id="_3-5-项目权限"><a href="#_3-5-项目权限" class="header-anchor">#</a> 3.5 项目权限</h3> <p>用户对sonar项目的访问管理权限</p> <h4 id="_3-5-1-用户管理"><a href="#_3-5-1-用户管理" class="header-anchor">#</a> 3.5.1 用户管理</h4> <ul><li><p>Administration --&gt; Security --&gt; Users，创建用户，以及进行用户管理（增删改，以及添加到组）</p></li> <li><p>Administration --&gt; Security --&gt; Groups，创建组，以及进行组管理（增删改，以及添加用户）</p></li></ul> <p><img src="/views-img/2020082501/%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86.png" alt=""></p> <h4 id="_3-5-2-项目权限管理"><a href="#_3-5-2-项目权限管理" class="header-anchor">#</a> 3.5.2 项目权限管理</h4> <ol><li>Administration --&gt; Projects --&gt; Management，会列出所有的现有项目</li> <li>Action --&gt; Edit Permissions，针对具体某个项目修改权限</li></ol> <p><img src="/views-img/2020082501/%E9%A1%B9%E7%9B%AE%E6%9D%83%E9%99%90.png" alt=""></p> <ol start="3"><li>选择Private，搜索用户/组（模糊匹配），给需要的用户/组勾选权限</li></ol> <p><img src="/views-img/2020082501/%E9%A1%B9%E7%9B%AE%E6%9D%83%E9%99%902.png" alt=""></p> <h2 id="_4-sonarqube之其他零碎介绍"><a href="#_4-sonarqube之其他零碎介绍" class="header-anchor">#</a> 4. sonarQube之其他零碎介绍</h2> <h3 id="_4-1-项目-projects"><a href="#_4-1-项目-projects" class="header-anchor">#</a> 4.1 项目(Projects)</h3> <h4 id="_4-1-1-预览页介绍"><a href="#_4-1-1-预览页介绍" class="header-anchor">#</a> 4.1.1 预览页介绍</h4> <ul><li>质量阀预览
<ul><li>安全性（Security Rating）：基于漏洞进行统计分析的结果</li> <li>可靠性（Reliability Rating）：基于bug进行统计分析的结果</li> <li>覆盖率（Coverage）：单元测试对代码的覆盖率</li> <li>重复率（Duplicated Lines）：代码的重复率</li></ul></li> <li>所有问题预览&amp;（相比于上一个版本的）新增问题预览
<ul><li>Bugs：整个工程所有&amp;新增的bug数量</li> <li>漏洞（Vulnerabilities）：整个工程所有&amp;新增的漏洞数量</li> <li>坏味道（Code Smell）：整个工程所有&amp;新增的坏味道数量，以及技术债务所需的时间（675d，表示675天）</li> <li>覆盖率（Coverage）：整个工程所有&amp;新增的代码覆盖率</li> <li>重复率（Duplications）：整个工程所有&amp;新增的代码重复率</li></ul></li></ul> <p><strong>以上所有项均可点击，查看详情</strong></p> <p><img src="/views-img/2020082501/%E9%A2%84%E8%A7%88%E9%A1%B5.png" alt=""></p> <h3 id="_4-2-问题-issues"><a href="#_4-2-问题-issues" class="header-anchor">#</a> 4.2 问题(Issues)</h3> <h4 id="_4-2-1-问题筛选"><a href="#_4-2-1-问题筛选" class="header-anchor">#</a> 4.2.1 问题筛选</h4> <ul><li>可以在筛选区域选出符合条件的问题。比如：如何筛选出2020年Eric_Xue在test-project中所有的坏味道问题？那么只需要在筛选区域添加以下条件即可：Type=Code Smell，Create Date的开始时间=2020年1月1日，Project=test-project，Author=eric_xue@alibaba.com。</li> <li>筛选列表最多显示15项，也没有搜索项，尤其是Author条件，很多情况下想找的Author根本没在显示列表中，没法筛选。这里提供一个<strong>小技巧</strong>，可以直接在url上自己拼条件筛选，比如上面例子的URL就是http://ip:port/issues?authors=eric_xue%40alibaba.com&amp;createdAfter=2020-01-01&amp;projectUuids=AXGrSrSDZzm0h22Diam6&amp;resolved=false&amp;types=CODE_SMELL，回车后直接看到结果。</li></ul> <p><img src="/views-img/2020082501/%E9%97%AE%E9%A2%98%E7%AD%9B%E9%80%89.png" alt=""></p> <h4 id="_4-2-2-问题修改"><a href="#_4-2-2-问题修改" class="header-anchor">#</a> 4.2.2 问题修改</h4> <ul><li>点击某条问题，可进入到详情页可看到问题具体出现在哪一行代码上。</li> <li>可配合问题详情提示进行修改，如下图所示</li></ul> <p><img src="/views-img/2020082501/%E9%97%AE%E9%A2%98%E4%BF%AE%E6%94%B9.png" alt=""></p> <h3 id="_4-3-代码规则-rules"><a href="#_4-3-代码规则-rules" class="header-anchor">#</a> 4.3 代码规则(Rules)</h3> <h4 id="_4-3-1-内置规则"><a href="#_4-3-1-内置规则" class="header-anchor">#</a> 4.3.1 内置规则</h4> <ul><li>sonar内置规则的规则是固定的，比如：Java总共有528条规则，在编辑质量配置时，只有这么多规则可供操作。如果这些规则中没有合适的，需要额外新增规则，那就得自己写sonar规则插件进行添加。</li></ul> <p><img src="/views-img/2020082501/%E5%86%85%E7%BD%AE%E8%A7%84%E5%88%99.png" alt=""></p> <h3 id="_4-4-质量配置-quality-profiles"><a href="#_4-4-质量配置-quality-profiles" class="header-anchor">#</a> 4.4 质量配置(Quality Profiles)</h3> <h4 id="_4-4-1-内置配置-默认配置"><a href="#_4-4-1-内置配置-默认配置" class="header-anchor">#</a> 4.4.1 内置配置&amp;默认配置</h4> <ul><li>sonar默认有多个语言（C#、Flex、Java等）的内置质量配置，标记着<code>Built-in</code>，这些质量配置的规则是无法编辑修改的。</li> <li>一般我们把内置配置设置成默认配置。如果某个工程没有指定质量配置，那么sonar分析时会采用默认配置去分析。</li></ul> <p><img src="/views-img/2020082501/%E5%86%85%E7%BD%AE%E8%B4%A8%E9%87%8F%E9%85%8D%E7%BD%AE.png" alt=""></p> <h3 id="_4-5-质量阀-quality-gates"><a href="#_4-5-质量阀-quality-gates" class="header-anchor">#</a> 4.5 质量阀(Quality Gates)</h3> <p>略...</p> <h3 id="_4-6-配置-administration"><a href="#_4-6-配置-administration" class="header-anchor">#</a> 4.6 配置(Administration)</h3> <h4 id="_4-6-1-插件市场"><a href="#_4-6-1-插件市场" class="header-anchor">#</a> 4.6.1 插件市场</h4> <ul><li>sonar支持在线安装插件，在Marketplace搜索（模糊匹配）想要的插件，安装后sonar会自动重启生效。当然也有可能自动重启失败，这时需要到sonar所在服务器手动重启。</li></ul> <p><img src="/views-img/2020082501/%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6.png" alt=""></p></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----></main> <!----> <div class="comments-wrapper" data-v-4698c43e><!----></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-a81d141e data-v-a81d141e><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-a81d141e><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-a81d141e></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-a81d141e></path></svg></div></div></div>
    <script src="/assets/js/app.cda6d5d2.js" defer></script><script src="/assets/js/3.e2fc40bf.js" defer></script><script src="/assets/js/1.e1e77f42.js" defer></script><script src="/assets/js/27.382e4b56.js" defer></script>
  </body>
</html>
